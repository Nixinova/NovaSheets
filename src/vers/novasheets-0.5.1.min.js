const e=String.raw;function t(e,t=8){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t);return Math.abs(r).toString(16).substring(0,t).padStart(t,"0")}function r(e,t){return"func"==e?r(`Unknown argument "${t[1]}" in function "${t[0]}" ${t[2]}`.trim()+"."):console.warn("<NovaSheets>",e)}function parseNovaSheets(s){let a=[],l=[],n,c;if(s)a=[s],l="raw";else{try{n=document.querySelectorAll('link[rel="novasheet" i], link[rel="novasheets" i]'),c=document.querySelectorAll('[type="novasheet" i], [type="novasheets" i]')}catch(p){n=document.querySelectorAll('link[rel="novasheet"], link[rel="novasheets"]'),c=document.querySelectorAll('[type="novasheet"], [type="novasheets"]')}let e={full:[],rel:[]};for(let t of n)e.full.push(t.href),e.rel.push(t.getAttribute("href"));for(let t in e.full)try{let s=new XMLHttpRequest;if(s.open("GET",e.full[t],!1),s.send(),404==s.status)throw 404;let n=s.responseText;a.push(n.toString()),l.push(e.rel[t])}catch(u){r(`File "${e.rel[t]}" cannot be accessed.`)}for(let e of c)a.push(e.innerHTML),l.push("inline")}window.randomHash=window.randomHash||t(Math.random().toString(),6);for(let n in a){a[n]=a[n].replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/(?<![a-z]+:)\n?\/\/.*$/gm,"").replace(/(?:@var.+?=.*$|@var\s*[^=]*(?=\n\s*@var\s.))(?!\n\s*@endvar)/gm,"$& @endvar").replace(/@(var|const|endvar)/g,"\n$&").replace(/@const\s*[A-Z_]+\s*(true|false|[0-9]+)|@endvar/g,"$&\n");let c=a[n].split("\n");window.csso="";let p=[],u=[];for(let e in c)c[e]=c[e].replace(/[\r\n]/g," "),csso+="\n"+c[e];csso=csso.replace(/\s*(?:@var.*?((?=@var)|@endvar)|@const\s*[A-Z_]+\s*(true|false|[0-9]+))/gms," ").replace(/\/\*(.+?)\*\//gs,(e,t)=>e.startsWith("/*[")&&e.endsWith("]*/")?e.replace(/^\/\*\[(.+)\]\*\/$/,"/*$1*/"):e.startsWith("/*/")||e.endsWith("/*/")?e:(p.indexOf(t)<0&&p.push(t),"/*COMMENT#"+p.indexOf(t)+"*/")).replace(/\/\*\/(.+?)\/\*\//gs,(e,t)=>(u.indexOf(t)<0&&u.push(t),"/*STATIC#"+u.indexOf(t)+"*/"));let i=[],o=50,m=5,h=10,g=!1;for(let e in c)if(c[e].match(/^\s*@var\s/)){let t=c[e].replace(/^\s*@var\s/,"").split("="),r=c.slice(e),s;for(let e in r)if(r[e].match(/^\s*@endvar\s*$|^\s*@var\s/)&&0!=e){s=e;break}let a=t[0].trim(),l=(t.slice(1).join("=")||"")+r.slice(1,s).join(" ");i.push({name:a.split("|")[0].trim(),content:l.trim()})}else c[e].match(/^\s*@const\s*MAX_RECURSION\s/)?o=parseInt(c[e].split("MAX_RECURSION")[1]):c[e].match(/^\s*@const\s*MAX_MATH_RECURSION\s/)?m=parseInt(c[e].split("MAX_MATH_RECURSION")[1]):c[e].match(/^\s*@const\s*MAX_ARGUMENTS\s/)?h=parseInt(c[e].split("MAX_ARGUMENTS")[1]):c[e].match(/^\s*@const\s*KEEP_NAN\s/)&&(g=!["0","false"].includes(c[e].split("KEEP_NAN")[1].trim()));const $=e`-?[0-9]*\.?[0-9]+`,f=e`-?(?:0x[0-9a-f]*\.?[0-9a-f]+|0b[01]*\.?[01]+|0o[0-7]*\.?[0-7]+|${$})`,d=e`\((?:${f})\)|${f}`,b=e`(${d})(?:\s*(cm|mm|m|ft|in|em|rem|en|ex|px|pt|pc))`,O=e=>g?Number(e):isNaN(Number(e))?"":Number(e),M=t=>e`(${d})\s*${t}\s*(${d})`,v=t=>e`\(\s*${M(t)}\s*\)`,x=t=>e`${b}?\s*${t}\s*${b}?`,N=(t,r)=>{for(let s of t){Array.isArray(s)||(s=[s,s]),s[0].startsWith("r")&&(s=[s[0].replace("r","").escapeRegex(),s[1].replace("r","")]);for(let t=0;t<m;t++){csso=csso.replace(RegExp("(?<!#[0-9a-f.]*)"+f,"g"),e=>O(e)).replace(RegExp(e`\b(${$})[Ee]([+-]?${$})\b`),(e,t,r)=>{return(O(t)*Math.pow(10,O(r))).toFixed(20).replace(/\.?0+$/,"")}).replace(/(?:\+\s*|-\s*-\s*)+([.0-9]+)/,"+$1").replace(/(?:\+\s*-|-\s*\+)+(?:\+\s*)*\s*([.0-9]+)/,"-$1").replace(RegExp(x(s[0])),(e,t,r,a,l)=>{if(!r&&!l)return e;t=O(t.replace(/[()]/g,"")),a=O(a.replace(/[()]/g,""));let n=(e,t)=>eval(e+s[1]+t);if(!r&&!l)return e;switch(r+","+l){case"m,cm":return n(100*t,a)+l;case"cm,m":return n(t/100,a)+l;case"m,mm":return n(1e3*t,a)+l;case"mm,m":return n(t/1e3,a)+l;case"cm,mm":return n(10*t,a)+l;case"mm,cm":return n(t/10,a)+l;case"m,in":return n(39.3701*t,a)+l;case"in,m":return n(t/39.3701,a)+l;case"cm,in":return n(.393701*t,a)+l;case"in,cm":return n(t/.393701,a)+l;case"mm,in":return n(.0393701*t,a)+l;case"in,mm":return n(t/.393701,a)+l;case"m,ft":return n(3.28084*t,a)+l;case"ft,m":return n(t/3.28084,a)+l;case"cm,ft":return n(.0328084*t,a)+l;case"ft,cm":return n(t/.0328084,a)+l;case"mm,ft":return n(.00328084*t,a)+l;case"ft,mm":return n(t/.00328084,a)+l;default:return n(t,a)+(l||r)}}).replace(RegExp(b),e=>e.replace(/[()]\s*/g,""));let t=r?v(s[0]):M(s[0]),a=csso.match(RegExp(t));if(!a)continue;let l=O(a[1].replace(/[()]/g,"")),n=Number(a[2].replace(/[()]/g,"")),c=eval(l+s[1]+n);csso=csso.replace(RegExp(t),c)}}},E=["r**",["r^","**"],[e`(?<!(?:[a-z]+)\([^)]*)\/`,"/"],"r*","r+",[e`(?<!@replace.*?)(?:-(?=\s)|(?<!\s)-(?!\s))`,"-"],["--","- -"]],R=(e,t)=>{let r=!e||e===1/0||Number.isNaN(e);return r&&g?"NaN":r&&!g?t||0:e},S=(t,r,s={})=>{let a=`${$}[a-z]*s*[-+^*/e]+s*${$}[a-z]*`;csso.match(RegExp(a))&&(N(E,!0),N(E,!1));let l=RegExp(e`\$\(\s*${t}\b`),n=csso.match(l);if(!n)return;let c,p=n?csso.indexOf(n[0]):-1,u=csso.substr(p),i="",o=0;for(let e=0;e<u.length&&(i+=u[e],o>0&&(c=!0),"("===u[e]&&o++,")"===u[e]&&o--,!c||0!==o);e++)if(e==u.length-1&&o>0)return;if(!i.trim("force"))return;let m=s.notrim?"|":/\s*\|\s*/,g=i.replace(/^\$\(\s*|\s*\)$/g,"").split(m);for(let e=0;e<h;e++)g[e]||(g[e]="");g[0]=i,g=g.slice(0,g.indexOf("")),csso=csso.replace(i,r(...g))};let A=0,w;for(;(csso.indexOf("$(")>-1||A<1)&&A++<o&&w!==csso;){w=csso;for(let t in i)S(i[t].name,(r,...s)=>{let a=i[t].content;for(let t in s){if(!s[t])continue;let r=s[t].split("="),l=r[1]?r[0].trim():+t+1,n=r[1]?r[1].trim():r[0].trim();a=a.replace(RegExp(e`\$\[${l}[^\]]*\]`,"g"),n)}return a=a.replace(/\$\[.*?(?:\|([^\]]*))?\]/g,"$1")});S("@each",(e,t,r,s,...a)=>{let l=[],n=t.trim().split(r.trim());for(let e in n){let t=a.join("|").replace(/\$i/gi,Number(e)+1).replace(/\$v\[([0-9]+)([-+*/][0-9]+)?\]/g,(e,t,r)=>n[eval(Number(t-1)+(r||0))]).replace(/.?\s*undefined/g,"").replace(/\$v/gi,n[e]);l.push(t)}return l.join(s)},{notrim:!0}),S("@repeat",(e,t,...r)=>{let s="";for(let e=0;e<Number(t);e++)s+=r.join("|").replace(/\$i/gi,Number(e)+1);return s},{notrim:!0}),S("@e",e=>Math.E),S("@pi",e=>Math.PI),S("@mod",(e,t,...r)=>R(t%r,e)),S("@sin",(e,t)=>R(Math.sin(t),e)),S("@asin",(e,t)=>R(Math.asin(t),e)),S("@cos",(e,t)=>R(Math.cos(t),e)),S("@acos",(e,t)=>R(Math.acos(t),e)),S("@tan",(e,t)=>R(Math.tan(t),e)),S("@atan",(e,t)=>R(Math.atan(t),e)),S("@abs",(e,t)=>R(Math.abs(t),e)),S("@floor",(e,t)=>R(Math.floor(t),e)),S("@ceil",(e,t)=>R(Math.ceil(t),e)),S("@percent",(e,t)=>R(100*O(t)+"%",e)),S("@log",(e,t,r)=>R(Math.log(r)/(t?Math.log(t):1),e)),S("@root",(e,t,r)=>R(Math.pow(r||t,1/(r?t:2)),e)),S("@round",(e,t,r)=>{let s=O(t)+Number.EPSILON,a=Math.pow(10,r||0);return R(Math.round(s*a)/a,e)}),S("@(?:max|min)",(e,...t)=>{let r=[];for(let e of t)e&&r.push(e);let s=e.includes("@min")?Math.min(...r):Math.max(...r);return R(s,e)}),S("@clamp",(e,t,r,s)=>{let a=Number(t),l=Number(r),n=Number(s);return n<l&&([l,n]=[n,l]),R(a<=l?l:a>=n?n:a,e)}),S("@degrees",(e,t)=>{let[r,s]=[t.replace(/[a-z]+/,""),t.replace(RegExp($),"")];if("grad"===s)return.9*r;let a=r/Math.PI*180;return R(a,e)}),S("@radians",(e,t)=>{let[r,s]=[t.replace(/[a-z]+/,""),t.replace(RegExp($),"")];if("grad"===s)return r*Math.PI/200;let a=r*Math.PI/180;return R(a,e)}),S("@gradians",(e,t)=>{let[r,s]=[t.replace(/[a-z]+/,""),t.replace(RegExp($),"")];return"rad"===s?r/Math.PI*200:R(r/.9,e)}),S("@extract",(e,t,r,s)=>t.split(r)[O(s)-1]||""),S("@encode",(e,t)=>encodeURIComponent(t)),S("@length",(e,t)=>t.trim().length),S("@replace",(e,...t)=>{let r=t[0].trim(),s=t.slice(1,-1).join("|").trim()||" ",a=t.slice(-1)[0].trim(),l=s.startsWith("/");if(console.log(t,"\n",r,s,a,"\n",l),l){let e=s.trim().match(/\/(.+?)\/([gimusy]*)/).slice(1);s=RegExp(e[0],e[1]||"s")}return r.replace(l?s:RegExp(s.escapeRegex(),"g"),a)},{notrim:!0});const t=e=>Math.floor(Number(e)/255*100),s=e=>Math.ceil(255*Number(e.replace("%",""))/100),a=e=>Number(e).toString(16).padStart(2,"0"),l=(e,t)=>{let r=parseInt(e.replace(/#?(.{0,6})(..)?$/,"$1"),16),s=r>>16&255,a=r>>8&255,l=255&r,n=parseInt(t,16);return n?`rgba(${s}, ${a}, ${l}, ${n})`:`rgb(${s}, ${a}, ${l})`},n=e=>e.length<3?"0".repeat(8):3===e.length?l(e[0]+e[0]+e[1]+e[1]+e[2]+e[2],"00"):4===e.length?l(e[0]+e[0]+e[1]+e[1]+e[2]+e[2],e[3]+e[3]):6===e.length?l(e.split(/(?=..)/).join(""),"0"):e.padEnd(8,"0");S("@colou?r",(e,r,l,c,p,u)=>([l,c,p,u]=[l||"0",c||"0",p||"0",u||""],/#|hash|hex.*|rgba?|hsla?/.test(r)?(l.includes("%")&&(l=s(l)),c.includes("%")&&(c=s(c)),p.includes("%")&&(p=s(p)),u.includes("%")&&(u=s(u)),/#|rgba?|hsla?/.test(l)&&(l.includes("#")&&(l=n(l.replace("#",""))),/rgba?|hsla?/.test(l)&&([l,c,p,u]=l.replace(/^[a-z]{3,4}\((.+)\)/g,"$1").split(","))),/#|hash|hex.*/.test(r)?"#"+a(l)+a(c)+a(p)+(u?a(u):""):/rgba?/.test(r)?"rgba"===r?`rgba(${l}, ${c}, ${p}, ${u||1})`:`rgb(${l}, ${c}, ${p})`:/hsla?/.test(r)?([c,p]=[t(c),t(p)],"hsla"===r?`${r}(${l%360}, ${c}%, ${p}%, ${u||1})`:`${r}(${l%360}, ${c}%, ${p}%)`):void 0):`${r.toLowerCase()}(${l} ${c} ${p}${u?" / "+u:""})`)),S("@luma",(e,t)=>{t.startsWith("#")&&(t=n(t.replace("#","").substr(0,6)));let[r,s,a]=t.replace(/^[a-z]{3,4}\((.+)\)/g,"$1").split(",");const l=e=>e<=.03928?e/12.92:(e=>((e+.055)/1.055)**2.4)(e);return.2126*l(r/255)+.7152*l(s/255)+.0722*l(a/255)}),S("@colou?rpart",(e,t,s)=>{t=t.trim().toLowerCase();let a=[];const l=(e,t)=>O("0x"+e.substr(t,2)).toString();if((s=s.trim().toLowerCase()).startsWith("#")){let e=s.replace("#","");3===e.length&&(e=e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2)+"00"),4===e.length&&(e=e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2)+e[3].repeat(2)),6===e.length&&(e+="00"),a=[l(e,0),l(e,2),l(e,4),l(e,6)]}else a=s.replace(/^\s*...a?\s*/,"").replace(/[()]/g,"").split(",");return s.startsWith("#")||s.startsWith("rgb")?t.startsWith("r")?a[0]:t.startsWith("g")?a[1]:t.startsWith("b")?a[2]:t.startsWith("a")?a[3]:(r("func",["colorpart",t,"of color type rgb/rgba/#"]),s):s.startsWith("hsl")?t.startsWith("h")?a[0]:t.startsWith("s")?a[1]:t.startsWith("l")?a[2]:t.startsWith("a")?a[3]:(r("func",["colorpart",t,"of color type hsl/hsla"]),s):(r("func",["colorpart",t,"of unknown color type"]),s)});const c=e=>{for(let t=0;t<h/10;t++)e=e.trim().replace(/(?:'(.+?)'|"(.+?)")+/,"$1$2").replace(/\bor\b/gi,"||").replace(/\band\b/gi,"&&").replace(/\bnot\b/gi,"!").replace(/(.+?)\bnor\b(.+)?/gi,"!($1) && !($2)").replace(/(.+?)\bnand\b(.+)?/gi,"!($1) || !($2)").replace(/(.+?)\bxor\b(.+)?/gi,"($1 && !($2)) || (!($1) && $2)").replace(/(.+?)\bxnor\b(.+)?/gi,"$1 == $2").replace(/(?!=)(!?)=(==)?(?!=)/g,"$1$2==");return e.match(/(<|<=|>|>=|==|!=|&|\||!)/)&&(e=eval(e)),["false","undefined","null","NaN",""].includes(e)&&(e=!1),e},p=t=>RegExp(e`([+-]?${d})\s*(?:${t})\s*([+-]?${d})`);S("@bitwise",(t,r)=>{r=r.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<");for(let t=0;t<h/10;t++)r=r.replace(RegExp(e`(?:~|!|not)\s*([+-]?${d})`),(e,t)=>eval("~"+O(t))).replace(p("or|\\|"),(e,t,r)=>eval(`(${O(t)}) | (${O(r)})`)).replace(p("nor"),(e,t,r)=>eval(`~ (${O(t)}) | (${O(r)})`)).replace(p("and|&"),(e,t,r)=>eval(`(${O(t)}) & (${O(r)})`)).replace(p("nand"),(e,t,r)=>eval(`~ (${O(t)}) & (${O(r)})`)).replace(p("xor"),(e,t,r)=>eval(`(${O(t)}) ^ (${O(r)})`)).replace(p("xnor"),(e,t,r)=>eval(`~ (${O(t)}) ^ (${O(r)})`));return r}),S("@boolean",(e,t)=>c(t)),S("@if",(e,t,r,s)=>c(t)?r:s||"")}csso=csso.replace(/@endvar/g,"");let y=csso.match(/\$[\[(](.+?)[\])]/g);if(y)for(let e of y){let t=e.replace(/\$[\[(](.*?)(\|.*)?[\])]/,"$1").trim();csso=csso.replace(e,"");let s=e.includes("$(")?"variable":"argument";r(`Instances of unparsed ${s} "${t}" have been removed from the output.`)}csso=csso.replace(/(\s*;)+/g,";").replace(/(?<!^ *) +/gm," ").replace(/\.?0{10,}\d*/g,"").replace(/(\d)(9{10,})\d?\b/g,(e,t)=>Number(t)+1);for(let t in u)csso=csso.replace(RegExp(e`\/\*STATIC#${t}\*\/`,"g"),u[t].trim());for(let t in p)csso=csso.replace(RegExp(e`\/\*COMMENT#${t}\*\/`,"g"),"/*"+p[t]+"*/");if(s)return r("Output: "+csso.trim()),csso.trim();{if(document.querySelectorAll(`[data-hash="${t(csso)}"]`).length)break;let e=document.createElement("style");e.innerHTML="\n"+csso.trimStart().trimEnd()+"\n",e.dataset.hash=t(csso),e.dataset.source=l[n],(document.head||document.body).appendChild(e)}window.csso=void 0}}String.prototype.trim=function(e){return this.replace(/^\s*(.+?)\s*$/,"$1").replace(/\s+/g,e?"":" ")},String.prototype.escapeRegex=function(){return this.replace(/[.*+?^/${}()|[\]\\]/g,"\\$&")},document.addEventListener("DOMContentLoaded",parseNovaSheets());