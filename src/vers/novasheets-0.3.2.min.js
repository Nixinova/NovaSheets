function nsse(e){console.error("<NovaSheets> Parsing failed: "+e)}function pns(){let sheets,inline;try{sheets=document.querySelectorAll('link[rel="novasheet" i], link[rel="novasheets" i]'),inline=document.querySelectorAll('[type="novasheet" i], [type="novasheets" i]')}catch(e){sheets=document.querySelectorAll('link[rel="novasheet"], link[rel="novasheets"]'),inline=document.querySelectorAll('[type="novasheet"], [type="novasheets"]')}let fn=[],sources=[];for(let e of sheets)fn.push(e.href);let sc=[];for(let e of fn)try{let t=new XMLHttpRequest;t.open("GET",e,!1),t.send();let s=t.responseText;sc.push(s.toString()),sources.push(e)}catch(t){nsse(`File "${e}" cannot be accessed.`)}for(let e of inline)sc.push(e.innerHTML),sources.push("inline");for(let s in sc){let lines=sc[s].split("\n"),cv=[],localVars=[],styles={},MAX_RECURSION=50,MAX_ARGUMENTS=10;for(let e in lines)if(lines[e]=lines[e].replace(/[\r\n]/g,"").replace(/^(.*?)\s?\/\/.+$/,"$1"),lines[e].match(/\s*---\s*/))lines[e]="---";else if(lines[e].match(/^\s*@var\s/)){let t=lines[e].replace(/^\s*@var\s/,"");cv.push({line:Number(e),contents:t,name:t.split("|")[0].trim(),subvars:t.split("|").splice(1)})}else lines[e].match(/^\s*@const\s*MAX_RECURSION\s/)?MAX_RECURSION=Number(lines[e].split("MAX_RECURSION")[1]):lines[e].match(/^\s*@const\s*MAX_ARGUMENTS\s/)&&(MAX_ARGUMENTS=Number(lines[e].split("MAX_ARGUMENTS")[1]));window.randomHash=window.randomHash||Math.random().toString().hsh(6);const varDeclEnding=lines.indexOf("---"),cssContent=lines.slice(varDeclEnding+1).join("\n");let csso=cssContent,loop=0;for(let e in cv){let t=cv[e].line+1,s=cv[e].name.trim(),n=cv[e+1]&&cv[e+1].line||varDeclEnding;for(styles[s]="";t<n&&!lines[t].match(/\s*@var\s/);)styles[s]+=lines[t].trim(),t++;for(let t of cv[e].subvars){let n=[randomHash,cv[e].name,t.trim()].join("-"),r=`$[${t.trim()}]`,l=`$(${n})`;styles[s]=styles[s].split(r).join(l),localVars.push(n)}}for(;(csso.indexOf("$(")>-1||loop<2)&&loop++<MAX_RECURSION;){for(let e in cv){let t=cv[e].name.er(),s="(?:\\|([^|=$()]+?[^|$()]+))?".repeat(MAX_ARGUMENTS),n=`\\$\\((${t})\\s?${s}\\)`,r=csso.match(RegExp(n));if(!r)continue;let l=!1;console.log(r);for(let e=0;e<r.length;e++)r[e]&&(console.log(r[e]),r[e].toString().includes("$(")&&(l=!0));let a="\\$\\("+cv[e].name+"[^)]*?\\)";csso=csso.replace(RegExp(a),styles[cv[e].name]);for(let e=0;e<r.length;e++){if(e<2||!r[e])continue;let[t,s]=r[e].split("=");for(let e in localVars){let n=localVars[e].trim(),r="\\$\\(\\s*"+n.er()+"\\)",l=n.trim().split("-").splice(2).join("-");l===t.trim()&&(csso=csso.replace(RegExp(r,"g"),s))}}}const number="[0-9]*(?:\\.[0-9]*)?",nssf=(e,t,s)=>(Array.isArray(t)||(t=Array(s||MAX_ARGUMENTS).fill(t||"[^|)]*?")),RegExp(`\\$\\(\\s*${e}\\s*(?:\\|(\\s*${t.join("))?\\s*(?:\\|(\\s*")}))?\\s*\\)`,"g")),ga=(e,t)=>{let s=e.replace(/\$\((.*)\)/,"$1").split("|");return t?s[t]&&s[t].trim():s.join("|").replace(/\s*\|\s*/g,"|").split("|").splice(1)};csso=csso.replace(nssf("@if"),args=>{let a=ga(args,1),b=ga(args,2),c=ga(args,3),test=a.replace(/(?:'(.+?)'|"(.+?)")+/,"$1$2").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/(?!=)(!?)=(==)?(?!=)/g,"$1$2==");return test.match(/(<|<=|>|>=|==|!=)/)&&(test=eval(test)),test=!["false","undefined","null","NaN",""].includes(test),test?b:c});const numberRegex="(?:0x|0b|0o)?(?:[0-9]*[.])?[0-9]+",mr=e=>"("+numberRegex+")\\s*"+e.er()+"\\s*("+numberRegex+")",mrb=e=>"\\("+mr(e)+"\\)",parseMath=(ops,b)=>{for(let op of ops){Array.isArray(op)||(op=[op,op]);let regex=b?mrb(op[0]):mr(op[0]),nums=csso.match(RegExp(regex));if(!nums)continue;let func=eval(`Number(${nums[1]}) ${op[1]} Number(${nums[2]})`);nums&&(csso=csso.replace(RegExp(regex),func))}};for(let e=0;e<5;e++)csso=csso.replace(/(?:\+|--)+([.0-9]+)/,"+$1").replace(/(?:\+-|-\+)+(?:\++)?([.0-9]+)/,"-$1"),parseMath(["**",["^","**"],"/","*","+","-",["--","- -"]],!0),parseMath(["**",["^","**"],"/","*","+","-",["--","- -"]],!1);csso=csso.replace(nssf("@mod",number,2),e=>ga(e,1)%ga(e,2)).replace(nssf("@min",number),e=>Math.min(...ga(e))).replace(nssf("@max",number),e=>Math.max(...ga(e))).replace(nssf("@clamp",number,3),e=>{let t=ga(e,1),s=ga(e,2),n=ga(e,3);return n<s&&([s,n]=[n,s]),t<=s?s:t>=n?n:t}).replace(nssf("@sin",number,1),e=>Math.sin(ga(e,1))).replace(nssf("@asin",number,1),e=>Math.asin(ga(e,1))).replace(nssf("@cos",number,1),e=>Math.cos(ga(e,1))).replace(nssf("@acos",number,1),e=>Math.acos(ga(e,1))).replace(nssf("@tan",number,1),e=>Math.tan(ga(e,1))).replace(nssf("@atan",number,1),e=>Math.atan(ga(e,1))).replace(nssf("@abs",number,1),e=>Math.abs(ga(e,1))).replace(nssf("@floor",number,1),e=>Math.floor(ga(e,1))).replace(nssf("@ceil",number,1),e=>Math.ciel(ga(e,1))).replace(nssf("@round",number,2),e=>{let t=Number(ga(e,1))+Number.EPSILON,s=ga(e,2)||0;return Math.round(t*10**s)/10**s}).replace(nssf("@log",number,1),e=>Math.log(ga(e,1))).replace(nssf("@root",number,2),e=>Math.pow(ga(e,2),1/ga(e,1))).replace(/\$\(@pi\)/g,Math.PI).replace(/\$\(@e\)/g,Math.E),csso=csso.replace(nssf("@encode"),e=>encodeURIComponent(ga(e,1))).replace(nssf("@replace"),e=>ga(e,1).replace(ga(e,2),ga(e,3))).replace(nssf("@length"),e=>ga(e,1).length),csso=csso.replace(nssf("@color"),e=>{let t=ga(e,1),s=ga(e,2)||0,n=ga(e,3)||0,r=ga(e,4)||0,l=ga(e,5)||0;return"hash"===t|"#"===t?s?((s=Math.abs(Math.round(s.replace("#",""))).toString()).length<3&&(s=s.padStart(3,0)),5===s.length&&(s=s.padStart(6,0)),7===s.length&&(s=s.padStart(8,0)),"#"+s):"#000":["rgb","hsl"].includes(t)?`${t}(${s}, ${n}, ${r})`:["rgba","hsla"].includes(t)?`${t}(${s}, ${n}, ${r}, ${l})`:void 0}).replace(nssf("@colorpart"),e=>{let t=ga(e,1),s=ga(e,2)||0,n=[];const r=(e,t)=>Number("0x"+e.substr(t,2)).toString();if(s.startsWith("#")){let e=s.replace("#","");3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+"00"),4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),6===e.length&&(e=e.repeat(2)+"00"),n=[r(e,0),r(e,2),r(e,4),r(e,6)]}else n=s.replace(/^\s*...a?/,"").split(",");return s.startsWith("#")||s.startsWith("rgb")?["red","r"].includes(t)?n[0]:["green","g"].includes(t)?n[1]:["blue","b"].includes(t)?n[2]:["alpha","a"].includes(t)?n[3]:(nsse(`Unknown part identifier "${t}" in function "@colorpart" of color type "rgb"/"rgba"/"#".`),s):s.startsWith("hsl")?["hue","h"].includes(t)?n[0]:["saturation","s"].includes(t)?n[1]:["lightness","l"].includes(t)?n[2]:["alpha","a"].includes(t)?n[3]:(nsse(`Unknown part identifier "${t}" in function "@colorpart" of color type "hsl"/"hsla".`),s):(nsse(`Unknown part identifier "${t}" in function "@colorpart" of unknown color type.`),s)})}if(csso=csso.replace(/;\s*;/g,";").replace(/\s+/g," "),document.querySelectorAll(`[data-hash="${csso.hsh()}"]`).length)break;let se=document.createElement("style");se.dataset.hash=csso.hsh(),se.dataset.source=sources[s],se.innerHTML="\n"+csso+"\n",(document.head||document.body).appendChild(se)}}String.prototype.hsh=function(e){let t=0;for(let e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e);return Math.abs(t).toString(16).substring(0,e||8).padStart(e,"0")},String.prototype.er=function(){return this.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},document.addEventListener("DOMContentLoaded",function(){try{pns()}catch(e){console.error(e)}});